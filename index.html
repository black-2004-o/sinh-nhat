<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ch√∫c m·ª´ng sinh nh·∫≠t üéÇ</title>
<style>
  :root{
    --pink1:#ffe6f2; --pink2:#fff0f5; --accent:#ff1493; --text:#4a2033;
  }
  html,body{height:100%;margin:0;font-family:"Segoe UI",Roboto,Arial,sans-serif;background:linear-gradient(180deg,var(--pink1),var(--pink2));color:var(--text);overflow:hidden}
  /* LOGIN */
  #login{
    position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;
    background:linear-gradient(135deg,#ffb6c1,#ffc0cb,#ffe6f2);text-align:center;z-index:20;padding:20px;
  }
  #banner{display:flex;flex-direction:column;align-items:center;margin-bottom:18px}
  #banner img{width:96px;height:96px;border-radius:50%;box-shadow:0 8px 26px rgba(0,0,0,0.12);margin-bottom:10px}
  #banner h1{font-size:28px;color:var(--accent);text-shadow:1px 1px #fff;margin:0}
  #password{padding:12px 14px;border-radius:12px;border:2px solid var(--accent);width:260px;text-align:center;font-size:16px;outline:none}
  .btn{margin-top:14px;background:var(--accent);border:none;color:#fff;padding:10px 20px;border-radius:12px;font-size:16px;cursor:pointer;box-shadow:0 8px 18px rgba(255,20,147,0.12)}
  .btn:hover{background:#ff69b4}
  #error{color:#c40000;margin-top:12px;font-weight:700;display:none}

  /* MAIN WISH */
  #main{display:none;padding:28px;text-align:center;position:relative;z-index:10;height:100%;box-sizing:border-box;overflow:auto}
  #main h2{color:var(--accent);font-size:34px;margin:8px 0;text-shadow:2px 2px #fff}
  .message{max-width:820px;margin:18px auto;background:rgba(255,255,255,0.75);padding:20px;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.08);line-height:1.6;color:#5a2a40}
  #nextImageBtn{margin-top:18px}

  /* CANVAS fireworks under main */
  canvas#fireworks{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}

  /* IMAGE PAGE */
  #imagePage{display:none;position:fixed;inset:0;background:#000;z-index:30;display:flex;align-items:center;justify-content:center;flex-direction:column}
  #imagePage img{max-width:93%;max-height:85vh;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,0.6);transform:scale(0.98);animation:imgIn 900ms cubic-bezier(.2,.9,.3,1) forwards}
  @keyframes imgIn{to{transform:scale(1)}}

  /* heart floating around image */
  .heart{position:absolute;font-size:28px;opacity:0.95;pointer-events:none;transform:translate(-50%,-50%);text-shadow:0 6px 18px rgba(0,0,0,0.25);animation:floatUp linear forwards}
  @keyframes floatUp{to{transform:translate(-50%,-300%) scale(1.1);opacity:0}}

  /* small responsive */
  @media(max-width:520px){
    #banner img{width:80px;height:80px}
    #password{width:200px}
    #main h2{font-size:26px}
    .message{padding:14px}
  }
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login" role="dialog" aria-label="M√†n nh·∫≠p m·∫≠t kh·∫©u">
  <div id="banner">
    <!-- b√°nh kem banner (file ph·∫£i c√≥ trong c√πng th∆∞ m·ª•c) -->
    <img src="c7b311ab-9b30-4c5c-a19c-8a0549e272db.png" alt="B√°nh kem">
    <h1>üéâ Ch√∫c M·ª´ng Sinh Nh·∫≠t Nguy·ªÖn Th·ªã Kim Ng√¢n üéÇ</h1>
  </div>

  <input id="password" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u..." aria-label="M·∫≠t kh·∫©u">
  <button id="nextBtn" class="btn">Next ‚ûú</button>
  <div id="error">Sai m·∫≠t kh·∫©u r·ªìi nha ü•∫</div>
</div>

<!-- FIREWORKS CANVAS (n·∫±m d∆∞·ªõi n·ªôi dung ch√≠nh) -->
<canvas id="fireworks" aria-hidden="true"></canvas>

<!-- MAIN L·ªúI CH√öC -->
<div id="main" role="main" aria-live="polite">
  <h2>üéâ Ch√∫c M·ª´ng Sinh Nh·∫≠t Nguy·ªÖn Th·ªã Kim Ng√¢n üéÇ</h2>
  <div class="message">
    üíñ Ch√∫c b·∫°n c√≥ m·ªôt ng√†y sinh nh·∫≠t th·∫≠t ng·ªçt ng√†o v√† tr√†n ƒë·∫ßy h·∫°nh ph√∫c!<br><br>
    Mong r·∫±ng h√¥m nay v√† m·ªói ng√†y sau n√†y ƒë·ªÅu tr√†n ng·∫≠p ti·∫øng c∆∞·ªùi, ni·ªÅm vui v√† y√™u th∆∞∆°ng üíï.<br><br>
    C·∫£m ∆°n b·∫°n v√¨ lu√¥n mang l·∫°i nƒÉng l∆∞·ª£ng t√≠ch c·ª±c cho m·ªçi ng∆∞·ªùi xung quanh üå∏.<br><br>
    Ch√∫c tu·ªïi m·ªõi c·ªßa <strong>Ng√¢n</strong> th√™m xinh ƒë·∫πp, may m·∫Øn v√† lu√¥n r·∫°ng r·ª° nh∆∞ √°nh n·∫øn lung linh n√†y üéÅüíêüéÇ
  </div>
  <button id="nextImageBtn" class="btn">Next ‚ûú</button>
</div>

<!-- IMAGE PAGE -->
<div id="imagePage" aria-hidden="true">
  <img id="finalImage" src="937dedea-f596-4b4f-85d2-ff8190c524a5.png" alt="H√¨nh ·∫£nh sinh nh·∫≠t" />
</div>

<!-- background music (will play when entering main) -->
<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_78a85dbd7a.mp3?filename=happy-birthday-116841.mp3" type="audio/mpeg">
  Your browser does not support audio.
</audio>

<script>
/* ====== Config ====== */
const CORRECT_PASS = "123456789Hieu";

/* ====== DOM refs ====== */
const passwordInput = document.getElementById('password');
const nextBtn = document.getElementById('nextBtn');
const loginDiv = document.getElementById('login');
const mainDiv = document.getElementById('main');
const imageDiv = document.getElementById('imagePage');
const nextImageBtn = document.getElementById('nextImageBtn');
const errorDiv = document.getElementById('error');
const bgm = document.getElementById('bgm');
const fireworksCanvas = document.getElementById('fireworks');
const finalImage = document.getElementById('finalImage');

/* ====== Password check ====== */
nextBtn.addEventListener('click', tryPass);
passwordInput.addEventListener('keyup', (e)=>{ if(e.key==='Enter') tryPass(); });

function tryPass(){
  const val = passwordInput.value.trim();
  if(val === CORRECT_PASS){
    // show main
    loginDiv.style.display = 'none';
    mainDiv.style.display = 'block';
    // attempt to play music (some browsers require user gesture; this click counts as gesture)
    bgm.play().catch(()=>{ /* ignore */ });
    // start fireworks
    startFireworks();
  } else {
    errorDiv.style.display = 'block';
    setTimeout(()=> errorDiv.style.display = 'none', 1600);
  }
}

/* ====== Next to image ====== */
nextImageBtn.addEventListener('click', ()=>{
  mainDiv.style.display = 'none';
  imageDiv.style.display = 'flex';
  // show some hearts floating
  spawnHeartsAround();
});

/* ====== Fireworks implementation (lightweight) ====== */
(function prepareCanvas(){
  const c = fireworksCanvas;
  const ctx = c.getContext('2d');
  function resize(){ c.width = innerWidth; c.height = innerHeight; }
  window.addEventListener('resize', resize);
  resize();

  const particles = [];

  class P {
    constructor(x,y,color,rad){
      this.x=x; this.y=y; this.vx=(Math.random()-0.5)*4; this.vy=(Math.random()-1.5)*4;
      this.r=rad|| (2+Math.random()*3); this.color=color; this.life=60+Math.random()*80;
    }
    update(){
      this.vy += 0.03;
      this.x += this.vx; this.y += this.vy;
      this.r *= 0.997;
      this.life--;
    }
    draw(){
      ctx.beginPath();
      ctx.globalCompositeOperation = 'lighter';
      ctx.fillStyle = this.color;
      ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
      ctx.fill();
      ctx.globalCompositeOperation = 'source-over';
    }
  }

  function spawnFirework(){
    const x = Math.random()*c.width;
    const y = Math.random()*c.height*0.45;
    const cols = ['#ff4081','#ffd700','#00e676','#00b0ff','#ff6e40','#ff77aa'];
    const col = cols[Math.floor(Math.random()*cols.length)];
    const count = 30 + Math.floor(Math.random()*30);
    for(let i=0;i<count;i++){
      const angle = Math.random()*Math.PI*2;
      const speed = 1.6 + Math.random()*3.2;
      const vx = Math.cos(angle)*speed;
      const vy = Math.sin(angle)*speed;
      const p = new P(x,y,col,2+Math.random()*3);
      p.vx = vx; p.vy = vy;
      particles.push(p);
    }
  }

  function loop(){
    ctx.fillStyle = 'rgba(8,8,12,0.12)';
    ctx.fillRect(0,0,c.width,c.height);
    for(let i=particles.length-1;i>=0;i--){
      particles[i].update();
      particles[i].draw();
      if(particles[i].life <= 0 || particles[i].r < 0.2) particles.splice(i,1);
    }
    requestAnimationFrame(loop);
  }

  // exports
  window.startFireworks = function(){
    // spawn some immediately and then interval
    for(let i=0;i<3;i++){ spawnFirework(); }
    if(window.__fireInterval) clearInterval(window.__fireInterval);
    window.__fireInterval = setInterval(spawnFirework,700);
    loop();
  };
})();

/* ====== Hearts around final image ====== */
function spawnHeartsAround(){
  const names = ['üíñ','üíò','üíï','üå∏','üå∑'];
  const container = imageDiv;
  const rect = finalImage.getBoundingClientRect();
  // generate multiple hearts
  for(let i=0;i<18;i++){
    (function(i){
      setTimeout(()=>{
        const el = document.createElement('div');
        el.className = 'heart';
        el.textContent = names[Math.floor(Math.random()*names.length)];
        // random position around image center
        const cx = window.innerWidth/2 + (Math.random()-0.5)*(rect.width*0.6);
        const cy = window.innerHeight/2 + (Math.random()-0.5)*(rect.height*0.2);
        el.style.left = cx + 'px';
        el.style.top = cy + 'px';
        el.style.fontSize = (18 + Math.random()*32) + 'px';
        el.style.animationDuration = (2400 + Math.random()*2600) + 'ms';
        container.appendChild(el);
        // remove after animation
        setTimeout(()=> el.remove(), 5200);
      }, i*120);
    })(i);
  }
  // also gently pulse the image
  finalImage.animate([{transform:'scale(0.98)'},{transform:'scale(1)'}],{duration:900,iterations:2,easing:'cubic-bezier(.2,.9,.3,1)'});
}

/* ====== Try to resume music if user previously interacted ====== */
document.addEventListener('visibilitychange', ()=> {
  if(!document.hidden && mainDiv.style.display === 'block'){
    bgm.play().catch(()=>{});
  }
});
</script>
</body>
</html>
